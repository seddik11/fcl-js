import{invariant as e}from"@onflow/util-invariant";import{SUBSCRIBE as n,UNSUBSCRIBE as r,spawn as t,send as o,subscriber as i}from"@onflow/util-actor";import{Buffer as u,encode as c}from"@onflow/rlp";import{sansPrefix as a,withPrefix as s}from"@onflow/util-address";import{SHA3 as l}from"sha3";import{template as f}from"@onflow/util-template";export{template as cadence,template as cdc}from"@onflow/util-template";function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},d.apply(this,arguments)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function p(e,n){return p=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},p(e,n)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e,n,r){return v=h()?Reflect.construct:function(e,n,r){var t=[null];t.push.apply(t,n);var o=new(Function.bind.apply(e,t));return r&&p(o,r.prototype),o},v.apply(null,arguments)}function g(e){var n="function"==typeof Map?new Map:void 0;return g=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return v(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},g(e)}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var k,b='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}',I=new Set(Object.keys(JSON.parse(b))),P=function(){return JSON.parse(b)},T="abcdefghijklmnopqrstuvwxyz0123456789".split(""),E=function(){return T[~~(Math.random()*T.length)]},S=function(){return Array.from({length:10},E).join("")},A=function(e){return"number"==typeof e},w=function(e){return Array.isArray(e)},N=function(e){return null!==e&&"object"==typeof e},O=function(e){return null==e},C=function(e){return"function"==typeof e},_=function(e){if(!N(e)||O(e)||A(e))return!1;for(var n,r=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return y(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,n):void 0}}(e))){r&&(e=r);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(I);!(n=r()).done;)if(!e.hasOwnProperty(n.value))return!1;return!0},G=function(e){return e.status="OK",e},B=function(e,n){return e.status="BAD",e.reason=n,e},j=function(e){return function(n){return n.tag=e,G(n)}},L=function(n,r){return void 0===r&&(r={}),function(t){var o;e("function"==typeof n||"object"==typeof n,"prepAccount must be passed an authorization function or an account object"),e(null!=r.role,"Account must have a role");var i=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),u=r.role,c=S();return n.authorization&&C(n.authorization)&&(n={resolve:n.authorization}),!n.authorization&&C(n)&&(n={resolve:n}),t.accounts[c]=d({},i,{tempId:c},n,{role:d({},i.role,"object"==typeof n.role?n.role:{},(o={},o[u]=!0,o))}),"authorizer"===u?t.authorizations.push(c):t[u]=c,t}},x=function(e){return function(n){var r=S();return n.message.arguments.push(r),n.arguments[r]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}'),n.arguments[r].tempId=r,n.arguments[r].value=e.value,n.arguments[r].asArgument=e.asArgument,n.arguments[r].xform=e.xform,n.arguments[r].resolve=e.resolve,n.arguments[r].resolveArgument=C(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,G(n)}},R=j("UNKNOWN"),K=j("SCRIPT"),D=j("TRANSACTION"),F=j("GET_TRANSACTION_STATUS"),U=j("GET_TRANSACTION"),z=j("GET_ACCOUNT"),H=j("GET_EVENTS"),M=j("GET_LATEST_BLOCK"),q=j("GET_BLOCK_BY_ID"),Y=j("GET_BLOCK_BY_HEIGHT"),W=j("PING"),J=j("GET_BLOCK"),V=j("GET_BLOCK_HEADER"),$=j("GET_COLLECTION"),Z=function(e){return function(n){return n.tag===e}},Q=Z("UNKNOWN"),X=Z("SCRIPT"),ee=Z("TRANSACTION"),ne=Z("GET_TRANSACTION_STATUS"),re=Z("GET_TRANSACTION"),te=Z("GET_ACCOUNT"),oe=Z("GET_EVENTS"),ie=Z("GET_LATEST_BLOCK"),ue=Z("GET_BLOCK_BY_ID"),ce=Z("GET_BLOCK_BY_HEIGHT"),ae=Z("PING"),se=Z("GET_BLOCK"),le=Z("GET_BLOCK_HEADER"),fe=Z("GET_COLLECTION"),de=function(e){return"OK"===e.status},me=function(e){return"BAD"===e.status},pe=function(e){return e.reason},he=function e(n,r){void 0===r&&(r=[]);try{return Promise.resolve(function(t,o){try{var i=Promise.resolve(n).then(function(t){if(n=function(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var t=r[n];if(!I.has(t))throw new Error('"'+t+'" is an invalid root level Interaction property.')}return e}(t),me(n))throw new Error("Interaction Error: "+n.reason);if(!r.length)return n;var o=r[0],i=r.slice(1);return Promise.resolve(o).then(function(r){if(C(r))return e(r(n),i);if(O(r)||!r)return e(n,i);if(_(r))return e(r,i);throw new Error("Invalid Interaction Composition")})})}catch(e){return o(e)}return i&&i.then?i.then(void 0,o):i}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},ve=function e(){var n=[].slice.call(arguments),r=n[0],t=n[1];return w(r)&&null==t?function(n){return e(n,r)}:he(r,t)},ge=function(e){return e},ye=function(e,n,r){return null==e.assigns[n]?r:e.assigns[n]},ke=function(e,n){return function(r){return r.assigns[e]=n,G(r)}},be=function(e,n){return void 0===n&&(n=ge),function(r){return r.assigns[e]=n(r.assigns[e],r),G(r)}},Ie=function(e){return function(n){return delete n.assigns[e],G(n)}},Pe={__proto__:null,UNKNOWN:"UNKNOWN",SCRIPT:"SCRIPT",TRANSACTION:"TRANSACTION",GET_TRANSACTION_STATUS:"GET_TRANSACTION_STATUS",GET_ACCOUNT:"GET_ACCOUNT",GET_EVENTS:"GET_EVENTS",GET_LATEST_BLOCK:"GET_LATEST_BLOCK",PING:"PING",GET_TRANSACTION:"GET_TRANSACTION",GET_BLOCK_BY_ID:"GET_BLOCK_BY_ID",GET_BLOCK_BY_HEIGHT:"GET_BLOCK_BY_HEIGHT",GET_BLOCK:"GET_BLOCK",GET_BLOCK_HEADER:"GET_BLOCK_HEADER",GET_COLLECTION:"GET_COLLECTION",BAD:"BAD",OK:"OK",ACCOUNT:"ACCOUNT",PARAM:"PARAM",ARGUMENT:"ARGUMENT",AUTHORIZER:"authorizer",PAYER:"payer",PROPOSER:"proposer",interaction:P,uuid:S,isNumber:A,isArray:w,isObj:N,isNull:O,isFn:C,isInteraction:_,Ok:G,Bad:B,prepAccount:L,makeArgument:x,makeUnknown:R,makeScript:K,makeTransaction:D,makeGetTransactionStatus:F,makeGetTransaction:U,makeGetAccount:z,makeGetEvents:H,makeGetLatestBlock:M,makeGetBlockById:q,makeGetBlockByHeight:Y,makePing:W,makeGetBlock:J,makeGetBlockHeader:V,makeGetCollection:$,isUnknown:Q,isScript:X,isTransaction:ee,isGetTransactionStatus:ne,isGetTransaction:re,isGetAccount:te,isGetEvents:oe,isGetLatestBlock:ie,isGetBlockById:ue,isGetBlockByHeight:ce,isPing:ae,isGetBlock:se,isGetBlockHeader:le,isGetCollection:fe,isOk:de,isBad:me,why:pe,isAccount:function(e){return"ACCOUNT"===e.kind},isParam:function(e){return"PARAM"===e.kind},isArgument:function(e){return"ARGUMENT"===e.kind},pipe:ve,get:ye,put:ke,update:be,destroy:Ie};function Te(e){return void 0===e&&(e=[]),ve(P(),e)}var Ee=function e(n,r){void 0===n&&(n=[]);try{if(!n.length)return Promise.resolve(r);var t=n[0],o=n.slice(1);return Promise.resolve(Ge(t)).then(function(n){return null==n?e(o,r):n})}catch(e){return Promise.reject(e)}},Se="config",Ae="PUT_CONFIG",we="GET_CONFIG",Ne="CONFIG/UPDATED",Oe=function(e){return e},Ce=((k={})[Ae]=function(e,n,r){var t=r.key,o=r.value;if(null==t)throw new Error("Missing 'key' for config/put.");e.put(t,o),e.broadcast(Ne,d({},e.all()))},k[we]=function(e,n,r){var t=r.key,o=r.fallback;if(null==t)throw new Error("Missing 'key' for config/get");n.reply(e.get(t,o))},k.GET_ALL_CONFIG=function(e,n){n.reply(d({},e.all()))},k.UPDATE_CONFIG=function(e,n,r){var t=r.key,o=r.fn;if(null==t)throw new Error("Missing 'key' for config/update");e.update(t,o||Oe),e.broadcast(Ne,d({},e.all()))},k.DELETE_CONFIG=function(e,n,r){var t=r.key;if(null==t)throw new Error("Missing 'key' for config/delete");e.delete(t),e.broadcast(Ne,d({},e.all()))},k.CLEAR_CONFIG=function(e,n){for(var r=0,t=Object.keys(e.all());r<t.length;r++)e.delete(t[r]);e.broadcast(Ne,d({},e.all()))},k.WHERE_CONFIG=function(e,n,r){var t=r.pattern;if(null==t)throw new Error("Missing 'pattern' for config/where");n.reply(e.where(t))},k[n]=function(e,n){e.subscribe(n.from),e.send(n.from,Ne,d({},e.all()))},k[r]=function(e,n){e.unsubscribe(n.from)},k);function _e(e,n){return o(Se,Ae,{key:e,value:n}),De()}function Ge(e,n){return o(Se,we,{key:e,fallback:n},{expectReply:!0,timeout:10})}function Be(){return o(Se,"GET_ALL_CONFIG",null,{expectReply:!0,timeout:10})}function je(e,n){return void 0===n&&(n=Oe),o(Se,"UPDATE_CONFIG",{key:e,fn:n}),De()}function Le(e){return o(Se,"DELETE_CONFIG",{key:e}),De()}function xe(e){return o(Se,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function Re(e){return i(Se,function(){return t(Ce,Se)},e)}function Ke(){return o(Se,"CLEAR_CONFIG")}function De(e){return null!=e&&"object"==typeof e&&Object.keys(e).map(function(n){return _e(n,e[n])}),{put:_e,get:Ge,all:Be,first:Ee,update:je,delete:Le,where:xe,subscribe:Re,overload:Ue}}t(Ce,Se),De.put=_e,De.get=Ge,De.all=Be,De.first=Ee,De.update=je,De.delete=Le,De.where=xe,De.subscribe=Re,De.overload=Ue;var Fe=function(e){return e};function Ue(e,n){return void 0===e&&(e={}),void 0===n&&(n=Fe),new Promise(function(r,t){try{return Promise.resolve(Be()).then(function(o){var i=function(t,i){try{var u=function(){De(e);var t=n;return Promise.resolve(Be()).then(function(e){return Promise.resolve(t(e)).then(function(e){return Promise.resolve(Ke()).then(function(){return Promise.resolve(De(o)).then(function(){r(e)})})})})}()}catch(e){return i(e)}return u&&u.then?u.then(void 0,i):u}(0,function(e){return Promise.resolve(Ke()).then(function(){return Promise.resolve(De(o)).then(function(){t(e)})})});if(i&&i.then)return i.then(function(){})})}catch(e){return Promise.reject(e)}})}var ze=function(){return JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null\n}')};function He(e){return void 0===e&&(e=null),ve([J,function(n){return n.block.isSealed=e,G(n)}])}function Me(e){return ve([z,function(n){return n.account.addr=a(e),G(n)}])}var qe=function(e,n,r){try{try{return Promise.resolve(Number(e))}catch(e){throw new Error("Decode Number Error : "+r.join("."))}}catch(e){return Promise.reject(e)}},Ye=function(e){return Promise.resolve(e)},We=function(e,n,r){try{return Promise.resolve(e.fields.reduce(function(e,t){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve($e(t.value,n,[].concat(r,[t.name]))).then(function(n){return e[t.name]=n,e})})},Promise.resolve({}))).then(function(r){var t=e.id&&Ve(n,e.id);return t?Promise.resolve(t(r)):r})}catch(e){return Promise.reject(e)}},Je={UInt:qe,Int:qe,UInt8:qe,Int8:qe,UInt16:qe,Int16:qe,UInt32:qe,Int32:qe,UInt64:qe,Int64:qe,UInt128:qe,Int128:qe,UInt256:qe,Int256:qe,Word8:qe,Word16:qe,Word32:qe,Word64:qe,UFix64:Ye,Fix64:Ye,String:Ye,Character:Ye,Bool:Ye,Address:Ye,Void:function(){return Promise.resolve(null)},Optional:function(e,n,r){return Promise.resolve(e?$e(e,n,r):null)},Reference:function(e){try{return Promise.resolve({address:e.address,type:e.type})}catch(e){return Promise.reject(e)}},Array:function(e,n,r){try{return Promise.resolve(Promise.all(e.map(function(e){return new Promise(function(t){try{return Promise.resolve($e(e,n,[].concat(r,[e.type]))).then(t)}catch(e){return Promise.reject(e)}})})))}catch(e){return Promise.reject(e)}},Dictionary:function(e,n,r){try{return Promise.resolve(e.reduce(function(e,t){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve($e(t.key,n,[].concat(r,[t.key]))).then(function(o){return Promise.resolve($e(t.value,n,[].concat(r,[t.key]))).then(function(n){return e[o]=n,e})})})},Promise.resolve({})))}catch(e){return Promise.reject(e)}},Event:We,Resource:We,Struct:We,Enum:We,Type:function(e){try{return Promise.resolve(e.staticType)}catch(e){return Promise.reject(e)}},Path:function(e){try{return Promise.resolve({domain:e.domain,identifier:e.identifier})}catch(e){return Promise.reject(e)}},Capability:function(e){try{return Promise.resolve({path:e.path,address:e.address,borrowType:e.borrowType})}catch(e){return Promise.reject(e)}}},Ve=function(e,n){var r=Object.keys(e).find(function(e){return/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(n):e===n});return n&&r&&e[r]},$e=function(e,n,r){try{var t=Ve(n,e.type);if(!t)throw new Error("Undefined Decoder Error: "+e.type+"@"+r.join("."));return Promise.resolve(t(e.value,n,r))}catch(e){return Promise.reject(e)}},Ze=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=[]);var t=d({},Je,n);return Promise.resolve($e(e,t,r))},Qe=function(e,n){void 0===n&&(n={});try{var r,t=d({},Je,n),o=e.encodedData?Promise.resolve(Ze(e.encodedData,t)).then(function(e){return r=1,e}):e.transactionStatus?Promise.resolve(Promise.all(e.transactionStatus.events.map(function(e){try{var n=e.eventIndex,r=e.transactionIndex,o=e.transactionId,i=e.type;return Promise.resolve(Ze(e.payload,t)).then(function(e){return{type:i,transactionId:o,transactionIndex:r,eventIndex:n,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(n){var t=d({},e.transactionStatus,{events:n});return r=1,t}):e.transaction?(r=1,e.transaction):e.events?Promise.resolve(Promise.all(e.events.map(function(e){try{var n=e.eventIndex,r=e.transactionIndex,o=e.transactionId,i=e.type,u=e.blockTimestamp,c=e.blockHeight,a=e.blockId;return Promise.resolve(Ze(e.payload,t)).then(function(e){return{blockId:a,blockHeight:c,blockTimestamp:u,type:i,transactionId:o,transactionIndex:r,eventIndex:n,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(e){return r=1,e}):e.account?(r=1,e.account):e.block?(r=1,e.block):e.blockHeader?(r=1,e.blockHeader):e.latestBlock?(console.error("\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"),r=1,e.latestBlock):e.transactionId?(r=1,e.transactionId):e.collection?(r=1,e.collection):void 0;return Promise.resolve(o&&o.then?o.then(function(e){return r?e:null}):r?o:null)}catch(e){return Promise.reject(e)}};function Xe(n){return function(n){try{return ee(n)?n.message.refBlock?Promise.resolve(G(n)):Promise.resolve(function(n){try{return Promise.resolve(De().get("accessNode.api")).then(function(n){return Promise.resolve(De.first(["sdk.transport","sdk.send"])).then(function(r){var t;return e(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),Promise.resolve(ve(P(),[He()])).then(function(e){return t=e,Promise.resolve(r(t,{config:De,response:ze,Buffer:u,ix:Pe},{node:n})).then(function(e){return t=e,Promise.resolve(Qe(t)).then(function(e){return(t=e).id})})})})})}catch(e){return Promise.reject(e)}}()).then(function(e){return n.message.refBlock=e,G(n)}):Promise.resolve(G(n))}catch(e){return Promise.reject(e)}}}var en=function(n){try{var r=function(){if(ee(n)||X(n)){var r=function(){return e(rn(t),"Cadence needs to be a string at this point."),Promise.resolve(De().where(/^0x/).then(function(e){return Object.entries(e).reduce(function(e,n){var r=n[1],t=new RegExp("(\\b"+n[0]+"\\b)","g");return e.replace(t,r)},t)})).then(function(e){n.message.cadence=e})},t=ye(n,"ix.cadence");e(nn(t)||rn(t),"Cadence needs to be a function or a string.");var o=function(){if(nn(t))return Promise.resolve(t({})).then(function(e){t=e})}();return o&&o.then?o.then(r):r()}}();return Promise.resolve(r&&r.then?r.then(function(){return n}):n)}catch(e){return Promise.reject(e)}},nn=function(e){return"function"==typeof e},rn=function(e){return"string"==typeof e};const tn="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function on(e,n,r){if(!e.s){if(r instanceof un){if(!r.s)return void(r.o=on.bind(null,e,n));1&n&&(n=r.s),r=r.v}if(r&&r.then)return void r.then(on.bind(null,e,n),on.bind(null,e,2));e.s=n,e.v=r;var t=e.o;t&&t(e)}}var un=function(){function e(){}return e.prototype.then=function(n,r){var t=new e,o=this.s;if(o){var i=1&o?n:r;if(i){try{on(t,1,i(this.v))}catch(e){on(t,2,e)}return t}return this}return this.o=function(e){try{var o=e.v;1&e.s?on(t,1,n?n(o):o):r?on(t,1,r(o)):on(t,2,o)}catch(e){on(t,2,e)}},t},e}();function cn(e){return e instanceof un&&1&e.s}var an,sn=function(n){try{var r=function(){if(ee(n)||X(n)){var r=function(e,n,r){if("function"==typeof e[tn]){var t,o,i,u=e[tn]();if(function e(r){try{for(;!(t=u.next()).done;)if((r=n(t.value))&&r.then){if(!cn(r))return void r.then(e,i||(i=on.bind(null,o=new un,2)));r=r.v}o?on(o,1,r):o=r}catch(e){on(o||(o=new un),2,e)}}(),u.return){var c=function(e){try{t.done||u.return()}catch(e){}return e};if(o&&o.then)return o.then(c,function(e){throw c(e)});c()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var a=[],s=0;s<e.length;s++)a.push(e[s]);return function(e,n,r){var t,o,i=-1;return function r(u){try{for(;++i<e.length;)if((u=n(i))&&u.then){if(!cn(u))return void u.then(r,o||(o=on.bind(null,t=new un,2)));u=u.v}t?on(t,1,u):t=u}catch(e){on(t||(t=new un),2,e)}}(),t}(a,function(e){return n(a[e])})}(Object.entries(n.arguments),function(r){var t=r[0];return Promise.resolve(ln(r[1])).then(function(r){n.arguments[t].asArgument=function(n){return e(null!=typeof n.xform,"No type specified for argument: "+n.value),fn(n.xform)?n.xform(n.value):fn(n.xform.asArgument)?n.xform.asArgument(n.value):void e(!1,"Invalid Argument",n)}(r)})});if(r&&r.then)return r.then(function(){})}}();return Promise.resolve(r&&r.then?r.then(function(){return n}):n)}catch(e){return Promise.reject(e)}},ln=function n(r,t){void 0===t&&(t=3);try{return e(t>0,"Argument Resolve Recursion Limit Exceeded for Arg: "+r.tempId),fn(r.resolveArgument)?Promise.resolve(r.resolveArgument()).then(function(e){return n(e,t-1)}):Promise.resolve(r)}catch(e){return Promise.reject(e)}},fn=function(e){return"function"==typeof e},dn=function(e){return vn(Pn(Tn(e)))},mn=function(e){return vn(Pn(En(e)))},pn=function(e,n){return u.from(e.padStart(2*n,0),"hex")},hn=(an=u.from("FLOW-V0.0-transaction").toString("hex"),u.from(an.padEnd(64,0),"hex")).toString("hex"),vn=function(e){return hn+e},gn=function(e){return pn(e,8)},yn=function(e){return pn(e,32)},kn=function(e){return u.from(JSON.stringify(e),"utf8")},bn=function(e){return u.from(e,"utf8")},In=function(e){return u.from(e,"hex")},Pn=function(e){return c(e).toString("hex")},Tn=function(e){return wn(e),[bn(e.cadence),e.arguments.map(kn),yn(e.refBlock),e.computeLimit,gn(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,gn(e.payer),e.authorizers.map(gn)]},En=function(e){return Nn(e),[Tn(e),Sn(e)]},Sn=function(e){var n=An(e);return e.payloadSigs.map(function(e){return{signerIndex:n.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,In(e.sig)]})},An=function(e){var n=new Map,r=0,t=function(e){n.has(e)||(n.set(e,r),r++)};return t(e.proposalKey.address),t(e.payer),e.authorizers.forEach(t),n},wn=function(e){Bn.forEach(function(n){return Dn(e,n)}),jn.forEach(function(n){return Dn(e.proposalKey,n,"proposalKey")})},Nn=function(e){Ln.forEach(function(n){return Dn(e,n)}),e.payloadSigs.forEach(function(e,n){xn.forEach(function(r){return Dn(e,r,"payloadSigs",n)})})},On=function(e){return"number"==typeof e},Cn=function(e){return"string"==typeof e},_n=function(e){return null!==e&&"object"==typeof e},Gn=function(e){return _n(e)&&e instanceof Array},Bn=[{name:"cadence",check:Cn},{name:"arguments",check:Gn},{name:"refBlock",check:Cn,defaultVal:"0"},{name:"computeLimit",check:On},{name:"proposalKey",check:_n},{name:"payer",check:Cn},{name:"authorizers",check:Gn}],jn=[{name:"address",check:Cn},{name:"keyId",check:On},{name:"sequenceNum",check:On}],Ln=[{name:"payloadSigs",check:Gn}],xn=[{name:"address",check:Cn},{name:"keyId",check:On},{name:"sig",check:Cn}],Rn=[{name:"envelopeSigs",check:Gn}],Kn=[{name:"address",check:Cn},{name:"keyId",check:On},{name:"sig",check:Cn}],Dn=function(e,n,r,t){var o=n.name,i=n.check,u=n.defaultVal;if(null==e[o]&&null!=u&&(e[o]=u),null==e[o])throw Un(o,r,t);if(!i(e[o]))throw zn(o,r,t)},Fn=function(e,n,r){return n?null==r?n+"."+e:n+"."+r+"."+e:e},Un=function(e,n,r){return new Error("Missing field "+Fn(e,n,r))},zn=function(e,n,r){return new Error("Invalid field "+Fn(e,n,r))};function Hn(e){var n=new Set(e.authorizations);return n.add(e.proposer),n.delete(e.payer),Array.from(n)}function Mn(e){var n=new Set([e.payer]);return Array.from(n)}var qn=function(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(n){return e.arguments[n].asArgument}),proposalKey:{address:s(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:s(e.accounts[e.payer].addr),authorizers:function(){var n=e.authorizations.map(function(n){return s(e.accounts[n].addr)}).reduce(function(e,n){return e.find(function(e){return e===n})?e:[].concat(e,[n])},[]);return n[0]?n:[]}(),payloadSigs:Hn(e).map(function(n){return{address:s(e.accounts[n].addr),keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}}),envelopeSigs:Mn(e).map(function(n){return{address:s(e.accounts[n].addr),keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}})}},Yn=function(e){return function(e){return n=Pn(function(e){!function(e){Bn.forEach(function(n){return Dn(e,n)}),jn.forEach(function(n){return Dn(e.proposalKey,n,"proposalKey")}),Ln.forEach(function(n){return Dn(e,n)}),e.payloadSigs.forEach(function(e,n){xn.forEach(function(r){return Dn(e,r,"payloadSigs",n)})}),Rn.forEach(function(n){return Dn(e,n)}),e.envelopeSigs.forEach(function(e,n){Kn.forEach(function(r){return Dn(e,r,"envelopeSigs",n)})})}(e);var n=An(e),r=function(e){return e.map(function(e){var r=e.keyId,t=e.sig;return{signerIndex:n.get(e.address),keyId:r,sig:t}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,In(e.sig)]})};return[[bn(e.cadence),e.arguments.map(kn),yn(e.refBlock),e.computeLimit,gn(a(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,gn(a(e.payer)),e.authorizers.map(function(e){return gn(a(e))})],r(e.payloadSigs),r(e.envelopeSigs)]}(e)),(r=new l(256)).update(u.from(n,"hex")),r.digest().toString("hex");var n,r}(e)},Wn="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Jn(e,n,r){if(!e.s){if(r instanceof Vn){if(!r.s)return void(r.o=Jn.bind(null,e,n));1&n&&(n=r.s),r=r.v}if(r&&r.then)return void r.then(Jn.bind(null,e,n),Jn.bind(null,e,2));e.s=n,e.v=r;var t=e.o;t&&t(e)}}var Vn=function(){function e(){}return e.prototype.then=function(n,r){var t=new e,o=this.s;if(o){var i=1&o?n:r;if(i){try{Jn(t,1,i(this.v))}catch(e){Jn(t,2,e)}return t}return this}return this.o=function(e){try{var o=e.v;1&e.s?Jn(t,1,n?n(o):o):r?Jn(t,1,r(o)):Jn(t,2,o)}catch(e){Jn(t,2,e)}},t},e}();function $n(e){return e instanceof Vn&&1&e.s}var Zn=function(e){try{var n=function(){if(ee(e))return function(n,r){try{var t=Promise.resolve(Qn(e,Object.values(e.accounts))).then(function(){return Promise.resolve(Qn(e,Object.values(e.accounts))).then(function(){})})}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}(0,function(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e})}();return Promise.resolve(n&&n.then?n.then(function(n){return e}):e)}catch(e){return Promise.reject(e)}},Qn=function n(r,t,o,i){void 0===i&&(i=3);try{var u=function(){o&&(r.authorizations=r.authorizations.map(function(e){return e===o.tempId?c:e}).reduce(function(e,n){return Array.isArray(n)?[].concat(e,n):[].concat(e,[n])},[]))};e(i,"Account Resolve Recursion Limit Exceeded",{ix:r,accounts:t});var c=[],a=function(e,n,r){if("function"==typeof e[Wn]){var t,o,i,u=e[Wn]();if(function e(r){try{for(;!(t=u.next()).done;)if((r=n(t.value))&&r.then){if(!$n(r))return void r.then(e,i||(i=Jn.bind(null,o=new Vn,2)));r=r.v}o?Jn(o,1,r):o=r}catch(e){Jn(o||(o=new Vn),2,e)}}(),u.return){var c=function(e){try{t.done||u.return()}catch(e){}return e};if(o&&o.then)return o.then(c,function(e){throw c(e)});c()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var a=[],s=0;s<e.length;s++)a.push(e[s]);return function(e,n,r){var t,o,i=-1;return function r(u){try{for(;++i<e.length;)if((u=n(i))&&u.then){if(!$n(u))return void u.then(r,o||(o=Jn.bind(null,t=new Vn,2)));u=u.v}t?Jn(t,1,u):t=u}catch(e){Jn(t||(t=new Vn),2,e)}}(),t}(a,function(e){return n(a[e])})}(t,function(e){function t(){function t(){u.tempId!=e.tempId&&delete r.accounts[u.tempId]}var a=function(){if(Array.isArray(e))return Promise.resolve(n(r,e,u,i-1)).then(function(){});null!=e.addr&&null!=e.keyId&&(e.tempId=e.addr+"-"+e.keyId),r.accounts[e.tempId]=r.accounts[e.tempId]||e,r.accounts[e.tempId].role.proposer=r.accounts[e.tempId].role.proposer||e.role.proposer,r.accounts[e.tempId].role.payer=r.accounts[e.tempId].role.payer||e.role.payer,r.accounts[e.tempId].role.authorizer=r.accounts[e.tempId].role.authorizer||e.role.authorizer,r.accounts[e.tempId].role.proposer&&r.proposer===u.tempId&&(r.proposer=e.tempId),r.accounts[e.tempId].role.payer&&r.payer===u.tempId&&(r.payer=e.tempId),r.accounts[e.tempId].role.authorizer&&(o?c=Array.from(new Set([].concat(c,[e.tempId]))):r.authorizations=r.authorizations.map(function(n){return n===u.tempId?e.tempId:n}))}();return a&&a.then?a.then(t):t()}var u=o||e,a=function(){if(Xn(e.resolve))return Promise.resolve(e.resolve(e,function(e,n){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(function(e){return n.arguments[e].asArgument}),data:{},interaction:n,voucher:qn(n)}}catch(e){throw console.error("buildPreSignable",e),e}}(e,r))).then(function(n){e=n})}();return a&&a.then?a.then(t):t()});return Promise.resolve(a&&a.then?a.then(u):u())}catch(e){return Promise.reject(e)}},Xn=function(e){return"function"==typeof e},er=function(e){try{var n=function(){if(ee(e))return function(n,r){try{var t=(o=Hn(e),i=dn(rr(e)),Promise.resolve(Promise.all(o.map(nr(e,i)))).then(function(){var n=Mn(e),r=mn(d({},rr(e),{payloadSigs:o.map(function(n){return{address:e.accounts[n].addr,keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}})}));return Promise.resolve(Promise.all(n.map(nr(e,r)))).then(function(){})}))}catch(e){return r(e)}var o,i;return t&&t.then?t.then(void 0,r):t}(0,function(n){throw console.error("Signatures",n,{ix:e}),n})}();return Promise.resolve(n&&n.then?n.then(function(n){return e}):e)}catch(e){return Promise.reject(e)}};function nr(e,n){return function(r){try{var t=e.accounts[r];return null!=t.signature?Promise.resolve():Promise.resolve(t.signingFunction(function(e,n,r){try{return{f_type:"Signable",f_vsn:"1.0.1",message:n,addr:a(e.addr),keyId:e.keyId,roles:e.role,cadence:r.message.cadence,args:r.message.arguments.map(function(e){return r.arguments[e].asArgument}),data:{},interaction:r,voucher:qn(r)}}catch(e){throw console.error("buildSignable",e),e}}(t,n,e))).then(function(n){e.accounts[r].signature=n.signature})}catch(e){return Promise.reject(e)}}}function rr(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(n){return e.arguments[n].asArgument}),proposalKey:{address:a(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:a(e.accounts[e.payer].addr),authorizers:e.authorizations.map(function(n){return a(e.accounts[n].addr)}).reduce(function(e,n){return e.find(function(e){return e===n})?e:[].concat(e,[n])},[])}}var tr=function(e){try{var n=ye(e,"ix.validators",[]);return Promise.resolve(ve(e,n.map(function(e){return function(n){return e(n,{Ok:G,Bad:B})}})))}catch(e){return Promise.reject(e)}},or=function(e){try{for(var n=0,r=Object.keys(e.accounts);n<r.length;n++){var t=r[n];e.accounts[t].addr=a(e.accounts[t].addr)}return Promise.resolve(e)}catch(e){return Promise.reject(e)}},ir=function(e){try{var n=ye(e,"ix.voucher-intercept"),r=function(){if(C(n))return Promise.resolve(n(qn(e))).then(function(){})}();return Promise.resolve(r&&r.then?r.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},ur=function(e){return e},cr=function(e,n){return void 0===n&&(n=ur),function(r){try{var t=function(e){return["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean)},o=function(){var n;(n=console).log.apply(n,["debug["+e+"] ---\n"].concat([].slice.call(arguments),["\n\n\n---"]))};return Promise.resolve(De.get("debug."+e)).then(function(e){var i=function(){if(e)return Promise.resolve(n(r,o,t)).then(function(){})}();return i&&i.then?i.then(function(){return r}):r})}catch(e){return Promise.reject(e)}}},ar=ve([en,cr("cadence",function(e,n){return n(e.message.cadence)}),sn,cr("arguments",function(e,n){return n(e.message.arguments,e.message)}),Zn,cr("accounts",function(e,n,r){return n.apply(void 0,r(e))}),function(n){try{var r=function(){if(ee(n)&&null==n.message.refBlock)return Promise.resolve(De().get("accessNode.api")).then(function(r){return Promise.resolve(De.first(["sdk.transport","sdk.send"])).then(function(t){return e(t,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),Promise.resolve(t(Te([He()]),{config:De,response:ze,Buffer:u,ix:Pe},{node:r}).then(Qe)).then(function(e){n.message.refBlock=e.id})})})}();return Promise.resolve(r&&r.then?r.then(function(){return n}):n)}catch(e){return Promise.reject(e)}},function(n){try{var r=function(){if(ee(n)){var r=Object.values(n.accounts).find(function(e){return e.role.proposer});e(r,"Transactions require a proposer");var t=function(){if(null==r.sequenceNum)return Promise.resolve(De().get("accessNode.api")).then(function(t){return Promise.resolve(De.first(["sdk.transport","sdk.send"])).then(function(o){return e(o,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),Promise.resolve(Te([Me(r.addr)])).then(function(e){return Promise.resolve(o(e,{config:De,response:ze,Buffer:u,ix:Pe},{node:t}).then(Qe).then(function(e){return e.keys}).then(function(e){return e.find(function(e){return e.index===r.keyId})}).then(function(e){return e.sequenceNumber})).then(function(e){n.accounts[r.tempId].sequenceNum=e})})})})}();if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(r&&r.then?r.then(function(){return n}):n)}catch(e){return Promise.reject(e)}},er,cr("signatures",function(e,n,r){return n.apply(void 0,r(e))}),or,tr,ir,cr("resolved",function(e,n){return n(e)})]);function sr(){var e=[].slice.call(arguments);if(e.length>1){var n=e,r=n[0],t=n[1];return sr(function(e,n){var o=n.Bad;return r?(0,n.Ok)(e):o(e,t)})}var o=e[0];return function(e){return o(e,{Ok:G,Bad:B})}}var lr=function(e,n){void 0===e&&(e=[]),void 0===n&&(n={});try{return Promise.resolve(De.first(["sdk.transport","sdk.send"],n.send)).then(function(r){return sr(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),Promise.resolve(De.first(["sdk.resolve"],n.resolve||ar)).then(function(t){function o(o){return n.node=o,Array.isArray(e)&&(e=ve(P(),e)),Promise.resolve(t(e)).then(function(e){return r(e,{config:De,response:ze,ix:Pe,Buffer:u},n)})}var i=n.node;return i?o(i):Promise.resolve(De().get("accessNode.api")).then(o)})})}catch(e){return Promise.reject(e)}},fr=function(e){try{return Promise.resolve(De().where(/^decoder\./)).then(function(n){var r=Object.entries(n).map(function(e){var n=e[0],r=e[1];return[n="/"+n.replace(/^decoder\./,"")+"$/",r]});return Qe(e,Object.fromEntries(r))})}catch(e){return Promise.reject(e)}},dr=function(e){var n,r;function t(n){var r,t=("\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: "+n+". \n        Please ensure the address: "+n+" is intended to sign the given transaction as specified by the transaction signable.\n      ").trim();return(r=e.call(this,t)||this).name="Unable To Determine Message Encoding For Signer Addresss",r}return r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,p(n,r),t}(g(Error)),mr=function(e,n){var r,t,o=(r=e.voucher,(t=new Set(r.authorizers)).add(r.proposalKey.address),t.delete(r.payer),Array.from(t).map(s)),i=function(e){var n=new Set([e.payer]);return Array.from(n).map(s)}(e.voucher),u=o.includes(s(n)),c=i.includes(s(n));if(!u&&!c)throw new dr(n);var l={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:d({},e.voucher.proposalKey,{address:a(e.voucher.proposalKey.address)}),payer:a(e.voucher.payer),authorizers:e.voucher.authorizers.map(a),payloadSigs:e.voucher.payloadSigs.map(function(e){return d({},e,{address:a(e.address)})})};return u?dn(l):mn(l)};function pr(e,n){return console.warn('\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      "latestBlock()" is deprecated, please use "block()" for this and future versions of FCL\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0008-deprecate-latest-block-method\n  \n      ============================\n    ',"font-weight:bold;font-family:monospace;"),lr([He(e)],n).then(Qe)}function hr(e){return be("ix.validators",function(n){return Array.isArray(n)?n.push(e):[e]})}function vr(e){return ve([function(n){return n.block.height=e,n},hr(function(e){if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e})])}function gr(e){return ve([function(n){return n.block.id=e,G(n)},hr(function(e,n){var r=n.Ok,t=n.Bad;return te(e)?t(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?t(e,"Unable to specify both block id and isSealed."):e.block.height?t(e,"Unable to specify both block id and block height."):r(e)})])}function yr(n,r,t){var o=void 0===r?{}:r,i=o.height,u=o.id;return e(!(u&&i),'Method: account -- Cannot pass "id" and "height" simultaneously'),u?lr([Me(n),gr(u)],t).then(Qe):i?lr([Me(n),vr(i)],t).then(Qe):lr([Me(n)],t).then(Qe)}function kr(n,r){var t=void 0===n?{}:n,o=t.sealed,i=void 0!==o&&o,u=t.id,c=t.height;return void 0===r&&(r={}),e(!(i&&u||i&&c),'Method: block -- Cannot pass "sealed" with "id" or "height"'),e(!(u&&c),'Method: block -- Cannot pass "id" and "height" simultaneously'),u?lr([He(),gr(u)],r).then(Qe):c?lr([He(),vr(c)],r).then(Qe):lr([He(i)],r).then(Qe)}function br(e){return void 0===e&&(e=[]),ve(e.map(function(e){return L(e,{role:"authorizer"})}))}function Ir(e,n,r,t){return{addr:e,signingFunction:n,keyId:r,sequenceNum:t}}function Pr(e,n,r){return void 0===n&&void 0===r||console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),ve([H,function(t){return t.events.eventType=e,t.events.start=n,t.events.end=r,G(t)}])}function Tr(e,n,r){return ve([H,function(t){return t.events.eventType=e,t.events.start=n,t.events.end=r,G(t)}])}function Er(e,n){return void 0===n&&(n=[]),ve([H,function(r){return r.events.eventType=e,r.events.blockIds=n,G(r)}])}function Sr(e){return void 0===e&&(e=null),ve([V,function(n){return n.block.isSealed=e,G(n)}])}function Ar(e){return void 0===e&&(e=!1),console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ve([M,function(n){return n.block.isSealed=e,G(n)}])}function wr(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ve([q,function(n){return n.block.ids=[e],G(n)}])}function Nr(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ve([Y,function(n){return n.block.height=e,G(n)}])}function Or(e){return void 0===e&&(e=null),ve([$,function(n){return n.collection.id=e,n}])}function Cr(e){return ve([F,function(n){return n.transaction.id=e,G(n)}])}function _r(e){return ve([U,function(n){return n.transaction.id=e,G(n)}])}function Gr(e){return function(n){return n.message.computeLimit=e,n}}function Br(e){return void 0===e&&(e=[]),ve(e.map(x))}function jr(e,n){return{value:e,xform:n}}var Lr=function(e){try{return Promise.resolve(L(e,{role:"proposer"}))}catch(e){return Promise.reject(e)}},xr=function(e){try{return Promise.resolve(L(e,{role:"payer"}))}catch(e){return Promise.reject(e)}};function Rr(){return W}function Kr(e){return ve([function(n){return n.message.refBlock=e,G(n)}])}function Dr(){return ve([K,ke("ix.cadence",f.apply(void 0,[].slice.call(arguments)))])}var Fr=[];function Ur(){return ve([D,ke("ix.cadence",f.apply(void 0,[].slice.call(arguments))),function(e){return e.message.computeLimit=e.message.computeLimit||10,e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||Fr,G(e)}])}function zr(e){return ke("ix.voucher-intercept",e)}var Hr=function(n){var r=n.node;return function(n){try{return ee(n)?n.accounts[n.proposer].sequenceNum?Promise.resolve(G(n)):Promise.resolve(De.first(["sdk.transport","sdk.send"])).then(function(t){return e(t,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),Promise.resolve(Te([Me(n.accounts[n.proposer].addr)])).then(function(e){return Promise.resolve(t(e,{config:De,response:ze,Buffer:u,ix:Pe},{node:r})).then(function(e){return Promise.resolve(Qe(e)).then(function(e){return n.accounts[n.proposer].sequenceNum=e.keys[n.accounts[n.proposer].keyId].sequenceNumber,G(n)})})})}):Promise.resolve(G(n))}catch(e){return Promise.reject(e)}}},Mr=function(e){return e},qr=["tempId"];function Yr(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function Wr(e){return void 0===e&&(e={}),function(n){var r=d({},n,e,{signingFunction:e.signingFunction||n.signingFunction||function(e){return{addr:r.addr,keyId:r.keyId,signature:Yr(r)}}});return r}}var Jr={proposer:!1,authorizer:!1,payer:!1},Vr={__proto__:null,mockSend:function(n){return void 0===n&&(n=Mr),function(r){return Promise.resolve(r).then(function(t){switch(r=t,!0){case te(r):return function(n,r){return void 0===r&&(r=5),e(n.account,"mockAccountResponse(ix) -- ix.account is missing",n),e(n.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",n),{account:{addr:n.account.addr,keys:Array.from({length:r},function(e,n){return{index:n,sequenceNumber:42}})}}}(r);case se(r):return{tag:"GET_BLOCK",block:{id:"32"}};default:return n(r)}})}},authzFn:Wr,authzResolve:function(e){return void 0===e&&(e={}),function(n){return d({},n,{tempId:e.tempId||"WITH_RESOLVE",resolve:Wr(function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n.indexOf(r=i[t])>=0||(o[r]=e[r]);return o}(e,qr))})}},authzResolveMany:function(e){return void 0===e&&(e={}),function(n){return d({},n,{tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:function(){return[e.proposer&&Wr(e.proposer)({role:d({},Jr,{proposer:!0})})].concat(e.authorizations.map(Wr).map(function(e){return e({role:d({},Jr,{authorizer:!0})})}),[e.payer&&Wr(e.payer)({role:d({},Jr,{payer:!0})})]).filter(Boolean)}})}},sig:Yr,idof:function(e){return e.addr+"-"+e.keyId},run:function(e){return void 0===e&&(e=[]),Te([Kr("123")].concat(e)).then(ar)}},$r="0.0.57-alpha.3",Zr=function(e){return n={name:"params",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.error("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+n.name+" builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+n.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var n},Qr=function(e){return n={name:"param",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+n.name+" builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+n.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var n};export{Vr as TestUtils,$r as VERSION,yr as account,jr as arg,Br as args,vr as atBlockHeight,gr as atBlockId,Ir as authorization,br as authorizations,kr as block,Te as build,De as config,qn as createSignableVoucher,fr as decode,Ie as destroy,mr as encodeMessageFromSignable,ye as get,Me as getAccount,He as getBlock,Nr as getBlockByHeight,wr as getBlockById,Sr as getBlockHeader,Or as getCollection,Pr as getEvents,Tr as getEventsAtBlockHeightRange,Er as getEventsAtBlockIds,Ar as getLatestBlock,_r as getTransaction,Cr as getTransactionStatus,P as interaction,sr as invariant,me as isBad,te as isGetAccount,se as isGetBlock,ce as isGetBlockByHeight,ue as isGetBlockById,le as isGetBlockHeader,fe as isGetCollection,oe as isGetEvents,ie as isGetLatestBlock,re as isGetTransaction,ne as isGetTransactionStatus,de as isOk,ae as isPing,X as isScript,ee as isTransaction,Q as isUnknown,pr as latestBlock,Gr as limit,Qr as param,Zr as params,xr as payer,Rr as ping,ve as pipe,Lr as proposer,ke as put,Kr as ref,ar as resolve,Zn as resolveAccounts,sn as resolveArguments,en as resolveCadence,or as resolveFinalNormalization,Hr as resolveProposerSequenceNumber,Xe as resolveRefBlockId,er as resolveSignatures,tr as resolveValidators,ir as resolveVoucherIntercept,Dr as script,lr as send,Ur as transaction,be as update,hr as validator,zr as voucherIntercept,Yn as voucherToTxId,pe as why};
//# sourceMappingURL=sdk.module.js.map
