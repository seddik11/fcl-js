{"version":3,"file":"sdk.module.js","sources":["../src/interaction/interaction.js","../src/build/build.js","../src/config/index.js","../src/response/response.js","../src/build/build-get-block.js","../src/build/build-get-account.js","../src/decode/decode.js","../src/resolve/resolve-ref-block-id.js","../src/resolve/resolve-cadence.js","../src/resolve/resolve-arguments.js","../src/encode/encode.js","../src/resolve/voucher.js","../src/resolve/resolve-accounts.js","../src/resolve/resolve-signatures.js","../src/resolve/resolve-validators.js","../src/resolve/resolve-final-normalization.js","../src/resolve/resolve-voucher-intercept.js","../src/resolve/resolve.js","../src/build/build-invariant.js","../src/send/send.js","../src/decode/sdk-decode.js","../src/wallet-utils/encode-signable.js","../src/latest-block/latest-block.js","../src/build/build-validator.js","../src/build/build-at-block-height.js","../src/build/build-at-block-id.js","../src/account/account.js","../src/block/block.js","../src/build/build-authorizations.js","../src/build/build-get-events.js","../src/build/build-get-events-at-block-height-range.js","../src/build/build-get-events-at-block-ids.js","../src/build/build-get-block-header.js","../src/build/build-get-latest-block.js","../src/build/build-get-block-by-id.js","../src/build/build-get-block-by-height.js","../src/build/build-get-collection.js","../src/build/build-get-transaction-status.js","../src/build/build-get-transaction.js","../src/build/build-limit.js","../src/build/build-arguments.js","../src/build/build-proposer.js","../src/build/build-payer.js","../src/build/build-ping.js","../src/build/build-ref.js","../src/build/build-script.js","../src/build/build-transaction.js","../src/build/build-voucher-intercept.js","../src/resolve/resolve-proposer-sequence-number.js","../src/test-utils/mock-send.js","../src/test-utils/authz-fn.js","../src/test-utils/run.js","../src/VERSION.js","../src/sdk.js","../src/utils/deprecate.js"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\n\nexport const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const GET_LATEST_BLOCK /*              */ = \"GET_LATEST_BLOCK\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK_BY_ID /*               */ = \"GET_BLOCK_BY_ID\"\nexport const GET_BLOCK_BY_HEIGHT /*           */ = \"GET_BLOCK_BY_HEIGHT\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\nexport const GET_COLLECTION /*                */ = \"GET_COLLECTION\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /*  */ = \"ACCOUNT\"\nexport const PARAM /*    */ = \"PARAM\"\nexport const ARGUMENT /* */ = \"ARGUMENT\"\n\nexport const AUTHORIZER /* */ = \"authorizer\"\nexport const PAYER /*      */ = \"payer\"\nexport const PROPOSER /*   */ = \"proposer\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":null,\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\nexport const isNumber = d => typeof d === \"number\"\nexport const isArray = d => Array.isArray(d)\nexport const isObj = d => d !== null && typeof d === \"object\"\nexport const isNull = d => d == null\nexport const isFn = d => typeof d === \"function\"\n\nexport const isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = ix => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = wat => ix => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nexport const prepAccount = (acct, opts = {}) => ix => {\n  invariant(\n    typeof acct === \"function\" || typeof acct === \"object\",\n    \"prepAccount must be passed an authorization function or an account object\"\n  )\n  invariant(opts.role != null, \"Account must have a role\")\n\n  const ACCOUNT = JSON.parse(ACCT)\n  const role = opts.role\n  const tempId = uuid()\n\n  if (acct.authorization && isFn(acct.authorization)) acct = {resolve: acct.authorization}\n  if (!acct.authorization && isFn(acct)) acct = {resolve: acct}\n\n  ix.accounts[tempId] = {\n    ...ACCOUNT,\n    tempId,\n    ...acct,\n    role: {\n      ...ACCOUNT.role,\n      ...(typeof acct.role === \"object\" ? acct.role : {}),\n      [role]: true,\n    },\n  }\n\n  if (role === AUTHORIZER) {\n    ix.authorizations.push(tempId)\n  } else {\n    ix[role] = tempId\n  }\n\n  return ix\n}\n\nexport const makeArgument = arg => ix => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  ix.arguments[tempId].resolveArgument = isFn(arg.resolveArgument) ? arg.resolveArgument.bind(arg) : arg.resolveArgument\n\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makeGetLatestBlock /*          */ = makeIx(GET_LATEST_BLOCK)\nexport const makeGetBlockById /*            */ = makeIx(GET_BLOCK_BY_ID)\nexport const makeGetBlockByHeight /*        */ = makeIx(GET_BLOCK_BY_HEIGHT)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\nexport const makeGetCollection /*           */ = makeIx(GET_COLLECTION)\n\nconst is = wat => ix => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isGetLatestBlock /*          */ = is(GET_LATEST_BLOCK)\nexport const isGetBlockById /*            */ = is(GET_BLOCK_BY_ID)\nexport const isGetBlockByHeight /*        */ = is(GET_BLOCK_BY_HEIGHT)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\nexport const isGetCollection /*           */ = is(GET_COLLECTION)\n\nexport const isOk /*  */ = ix => ix.status === OK\nexport const isBad /* */ = ix => ix.status === BAD\nexport const why /*   */ = ix => ix.reason\n\nexport const isAccount /*  */ = account => account.kind === ACCOUNT\nexport const isParam /*    */ = param => param.kind === PARAM\nexport const isArgument /* */ = argument => argument.kind === ARGUMENT\n\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return d => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = v => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => ix => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => ix => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = key => ix => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","import {\n  spawn,\n  send,\n  subscriber,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\n\nconst NAME = \"config\"\nconst PUT = \"PUT_CONFIG\"\nconst GET = \"GET_CONFIG\"\nconst GET_ALL = \"GET_ALL_CONFIG\"\nconst UPDATE = \"UPDATE_CONFIG\"\nconst DELETE = \"DELETE_CONFIG\"\nconst CLEAR = \"CLEAR_CONFIG\"\nconst WHERE = \"WHERE_CONFIG\"\nconst UPDATED = \"CONFIG/UPDATED\"\n\nconst identity = v => v\n\nconst HANDLERS = {\n  [PUT]: (ctx, _letter, {key, value}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/put.\")\n    ctx.put(key, value)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [GET]: (ctx, letter, {key, fallback}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/get\")\n    letter.reply(ctx.get(key, fallback))\n  },\n  [GET_ALL]: (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [UPDATE]: (ctx, letter, {key, fn}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/update\")\n    ctx.update(key, fn || identity)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DELETE]: (ctx, letter, {key}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/delete\")\n    ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [CLEAR]: (ctx, letter) => {\n    let keys = Object.keys(ctx.all())\n    for (let key of keys) ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [WHERE]: (ctx, letter, {pattern}) => {\n    if (pattern == null) throw new Error(\"Missing 'pattern' for config/where\")\n    letter.reply(ctx.where(pattern))\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n}\n\nspawn(HANDLERS, NAME)\n\nfunction put(key, value) {\n  send(NAME, PUT, {key, value})\n  return config()\n}\n\nfunction get(key, fallback) {\n  return send(NAME, GET, {key, fallback}, {expectReply: true, timeout: 10})\n}\n\nasync function first(wants = [], fallback) {\n  if (!wants.length) return fallback\n  const [head, ...rest] = wants\n  const ret = await get(head)\n  if (ret == null) return first(rest, fallback)\n  return ret\n}\n\nfunction all() {\n  return send(NAME, GET_ALL, null, {expectReply: true, timeout: 10})\n}\n\nfunction update(key, fn = identity) {\n  send(NAME, UPDATE, {key, fn})\n  return config()\n}\n\nfunction _delete(key) {\n  send(NAME, DELETE, {key})\n  return config()\n}\n\nfunction where(pattern) {\n  return send(NAME, WHERE, {pattern}, {expectReply: true, timeout: 10})\n}\n\nfunction subscribe(callback) {\n  return subscriber(NAME, () => spawn(HANDLERS, NAME), callback)\n}\n\nexport function clearConfig() {\n  return send(NAME, CLEAR)\n}\n\nfunction config(values) {\n  if (values != null && typeof values === \"object\") {\n    Object.keys(values).map(d => put(d, values[d]))\n  }\n\n  return {\n    put,\n    get,\n    all,\n    first,\n    update,\n    delete: _delete,\n    where,\n    subscribe,\n    overload,\n  }\n}\n\nconfig.put = put\nconfig.get = get\nconfig.all = all\nconfig.first = first\nconfig.update = update\nconfig.delete = _delete\nconfig.where = where\nconfig.subscribe = subscribe\nconfig.overload = overload\n\nexport {config}\n\nconst noop = v => v\nfunction overload(opts = {}, callback = noop) {\n  return new Promise(async (resolve, reject) => {\n    const oldConfig = await all()\n    try {\n      config(opts)\n      var result = await callback(await all())\n      await clearConfig()\n      await config(oldConfig)\n      resolve(result)\n    } catch (error) {\n      await clearConfig()\n      await config(oldConfig)\n      reject(error)\n    }\n  })\n}\n","const DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null\n}`\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    }\n  ])\n}\n","const latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async (i) => i\n\nconst decodeVoid = async () => null\n\nconst decodeType = async (type) => {\n  return type.staticType\n}\n\nconst decodePath = async (path) => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier\n  }\n}\n\nconst decodeCapability = async (cap) => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType\n  }\n}\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async (v) => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      (v) =>\n        new Promise(async (res) =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[\n      await recurseDecode(v.key, decoders, [...stack, v.key])\n    ] = await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeNumber,\n  Int: decodeNumber,\n  UInt8: decodeNumber,\n  Int8: decodeNumber,\n  UInt16: decodeNumber,\n  Int16: decodeNumber,\n  UInt32: decodeNumber,\n  Int32: decodeNumber,\n  UInt64: decodeNumber,\n  Int64: decodeNumber,\n  UInt128: decodeNumber,\n  Int128: decodeNumber,\n  UInt256: decodeNumber,\n  Int256: decodeNumber,\n  Word8: decodeNumber,\n  Word16: decodeNumber,\n  Word32: decodeNumber,\n  Word64: decodeNumber,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find((decoder) => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n  return await recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n\n  if (response.encodedData) {\n    return await decode(response.encodedData, decoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, decoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, decoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  }\n\n  return null\n}\n","import {isTransaction, Ok, interaction, pipe} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"../config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\n\nasync function getRefId (opts) {\n  const node = await config().get(\"accessNode.api\")\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"]\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await sendFn(\n    ix,\n    {config, response, Buffer, ix: ixModule},\n    {node}\n  )\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"../config\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nexport async function resolveCadence(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    var cadence = get(ix, \"ix.cadence\")\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({})\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    ix.message.cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce(\n          (cadence, [key, value]) => {\n            const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", 'g')\n            return cadence.replace(regex, value)\n          },\n          cadence\n        )\n      )\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nasync function handleArgResolution(arg, depth = 3) {\n  invariant(depth > 0, `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`)\n\n  if (isFn(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument()\n    return handleArgResolution(resolvedArg, depth - 1)\n  } else {\n    return arg\n  }\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg)\n      ix.arguments[id].asArgument = cast(res)\n    }\n  }\n\n  return ix\n}\n","import { SHA3 } from \"sha3\"\nimport { encode, Buffer } from \"@onflow/rlp\"\nimport { sansPrefix } from \"@onflow/util-address\"\n\nexport const encodeTransactionPayload = tx => prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\nexport const encodeTransactionEnvelope = tx => prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\nexport const encodeTxIdFromVoucher = voucher => sha3_256(rlpEncode(prepareVoucher(voucher)))\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, 0), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"), 32).toString(\"hex\")\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst sha3_256 = msg => {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(msg, \"hex\"))\n  return sha.digest().toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.computeLimit,\n    addressBuffer(tx.proposalKey.address),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(tx.payer),\n    tx.authorizers.map(addressBuffer),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst prepareVoucher = voucher => {\n  validateVoucher(voucher)\n\n  const signers = collectSigners(voucher)\n\n  const prepareSigs = sigs => {\n    return sigs.map(({ address, keyId, sig }) => {\n      return { signerIndex: signers.get(address), keyId, sig }\n    }).sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    }).map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n  }\n\n  return [\n    [\n      scriptBuffer(voucher.cadence),\n      voucher.arguments.map(argumentToString),\n      blockBuffer(voucher.refBlock),\n      voucher.computeLimit,\n      addressBuffer(sansPrefix(voucher.proposalKey.address)),\n      voucher.proposalKey.keyId,\n      voucher.proposalKey.sequenceNum,\n      addressBuffer(sansPrefix(voucher.payer)),\n      voucher.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n    ],\n    prepareSigs(voucher.payloadSigs),\n    prepareSigs(voucher.envelopeSigs),\n  ]\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  payloadSigsFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst validateVoucher = voucher => {\n  payloadFields.forEach(field => checkField(voucher, field))\n  proposalKeyFields.forEach(field =>\n    checkField(voucher.proposalKey, field, \"proposalKey\")\n  )\n  payloadSigsFields.forEach(field => checkField(voucher, field))\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n  envelopeSigsFields.forEach(field => checkField(voucher, field))\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field =>\n      checkField(sig, field, \"envelopeSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst payloadSigsFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst envelopeSigsFields = [{name: \"envelopeSigs\", check: isArray}]\n\nconst envelopeSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {withPrefix} from \"@onflow/util-address\"\nimport {encodeTxIdFromVoucher} from \"../encode/encode.js\"\n\nexport function findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  inside.delete(ix.payer)\n  return Array.from(inside)\n}\n\nexport function findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set([ix.payer])\n  return Array.from(outside)\n}\n\nexport const createSignableVoucher = ix => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, [])\n    return authorizations[0] ? authorizations : []\n  }\n\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: withPrefix(ix.accounts[ix.payer].addr),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\nexport const voucherToTxId = voucher => {\n  return encodeTxIdFromVoucher(voucher)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nconst isFn = v => typeof v === \"function\"\nexport function buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    var old = last || ax\n    if (isFn(ax.resolve)) ax = await ax.resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = `${ax.addr}-${ax.keyId}`\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer && ix.payer === old.tempId) {\n        ix.payer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]))\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n          // if (!new Set(ix.authorizations).has(ax.tempId)) {\n          //   ix.authorizations = Array.from(\n          //     new Set([...ix.authorizations, ax.tempId])\n          //   )\n          // }\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\nimport {\n  createSignableVoucher,\n  findInsideSigners,\n  findOutsideSigners,\n} from \"./voucher.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    // if (!acct.role.proposer) {\n    //   ix.accounts[id].keyId = keyId\n    // }\n    ix.accounts[id].signature = signature\n  }\n}\n\nexport function buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: sansPrefix(ix.accounts[ix.payer].addr),\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import { get, pipe, Ok, Bad } from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, 'ix.validators', [])\n  return pipe(ix, validators.map(cb => ix => cb(ix, { Ok, Bad })))\n}   \n","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {get, isFn} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nexport async function resolveVoucherIntercept(ix) {\n  const fn = get(ix, \"ix.voucher-intercept\")\n  if (isFn(fn)) {\n    await fn(createSignableVoucher(ix))\n  }\n  return ix\n}\n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"../config\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response} from \"../response/response.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveRefBlockId} from \"./resolve-ref-block-id.js\"\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\nimport {resolveVoucherIntercept} from \"./resolve-voucher-intercept.js\"\n\nconst noop = v => v\nconst debug =\n  (key, fn = noop) =>\n  async ix => {\n    const take = (obj, keys = []) => {\n      if (typeof keys === \"string\") keys = keys.split(\" \")\n      keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n    }\n\n    const accts = ix =>\n      [\n        \"\\nAccounts:\",\n        {\n          proposer: ix.proposer,\n          authorizations: ix.authorizations,\n          payer: ix.payer,\n        },\n        \"\\n\\nDetails:\",\n        ix.accounts,\n      ].filter(Boolean)\n\n    const log = (...msg) => {\n      console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n    }\n\n    if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n    return ix\n  }\n\nexport const resolve = pipe([\n  resolveCadence,\n  debug(\"cadence\", (ix, log) => log(ix.message.cadence)),\n  resolveArguments,\n  debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)),\n  resolveAccounts,\n  debug(\"accounts\", (ix, log, accts) => log(...accts(ix))),\n  /* special */ execFetchRef,\n  /* special */ execFetchSequenceNumber,\n  resolveSignatures,\n  debug(\"signatures\", (ix, log, accts) => log(...accts(ix))),\n  resolveFinalNormalization,\n  resolveValidators,\n  resolveVoucherIntercept,\n  debug(\"resolved\", (ix, log) => log(ix)),\n])\n\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const node = await config().get(\"accessNode.api\")\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"])\n\n    invariant(\n      sendFn,\n      `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n    )\n\n    ix.message.refBlock = (\n      await sendFn(\n        build([getBlock()]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      ).then(decode)\n    ).id\n  }\n  return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n      const node = await config().get(\"accessNode.api\")\n      const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"])\n\n      invariant(\n        sendFn,\n        `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n      )\n\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(\n        await build([getAccount(acct.addr)]),\n        {config, response, Buffer, ix: ixModule},\n        {node}\n      )\n        .then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n  }\n  return ix\n}\n","import { Ok, Bad } from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, { Ok, Bad }) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {Buffer} from \"@onflow/rlp\"\nimport {interaction, pipe} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {invariant} from \"../build/build-invariant.js\"\nimport {response} from \"../response/response.js\"\nimport {config} from \"../config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\n\nexport const send = async (args = [], opts = {}) => {\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    opts.send\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  const resolveFn = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  opts.node = opts.node || (await config().get(\"accessNode.api\"))\n\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFn(await resolveFn(args), {config, response, ix: ixModule, Buffer}, opts)\n}\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"../config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n    encodeTransactionPayload,\n    encodeTransactionEnvelope,\n} from \"../encode/encode.js\"\n\nconst findPayloadSigners = (voucher) => {\n    // Payload Signers Are: (authorizers + proposer) - payer\n    let payload = new Set(voucher.authorizers)\n    payload.add(voucher.proposalKey.address)\n    payload.delete(voucher.payer)\n    return Array.from(payload).map(withPrefix)\n}\n\nconst findEnvelopeSigners = (voucher) => {\n    // Envelope Signers Are: (payer)\n    let envelope = new Set([voucher.payer])\n    return Array.from(envelope).map(withPrefix)\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n    constructor(signerAddress) {\n      const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n      super(msg)\n      this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n    }\n}\n\nexport const encodeMessageFromSignable = (signable, signerAddress) => {\n    let payloadSigners = findPayloadSigners(signable.voucher)\n    let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n    const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n    const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n    if (!isPayloadSigner && !isEnvelopeSigner) {\n        throw new UnableToDetermineMessageEncodingTypeForSignerAddress(signerAddress)\n    }\n\n    const message = {\n        cadence: signable.voucher.cadence,\n        refBlock: signable.voucher.refBlock,\n        computeLimit: signable.voucher.computeLimit,\n        arguments: signable.voucher.arguments,\n        proposalKey: {\n            ...signable.voucher.proposalKey,\n            address: sansPrefix(signable.voucher.proposalKey.address)\n        },\n        payer: sansPrefix(signable.voucher.payer),\n        authorizers: signable.voucher.authorizers.map(sansPrefix),\n        payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n            ...ps,\n            address: sansPrefix(ps.address)\n        }))\n    }\n\n    return isPayloadSigner ? encodeTransactionPayload(message) : encodeTransactionEnvelope(message)\n}\n\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nexport function latestBlock(isSealed, opts) {\n  console.warn(\n    `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      \"latestBlock()\" is deprecated, please use \"block()\" for this and future versions of FCL\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0008-deprecate-latest-block-method\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n  ) \n\n  return send([getBlock(isSealed)], opts).then(decode)\n}\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n    return update('ix.validators', validators => \n        Array.isArray(validators) ? validators.push(cb) : [cb]\n    )\n}\n","import {pipe} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return ix\n    },\n    validator(ix => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\")\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\nexport function account(address, {height, id} = {}, opts) {\n  invariant(\n    !(id && height),\n    `Method: account -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get account by ID\n  if (id) return send([getAccount(address), atBlockId(id)], opts).then(decode)\n\n  // Get account by height\n  if (height) return send([getAccount(address), atBlockHeight(height)], opts).then(decode)\n\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {atBlockHeight} from \"../build/build-at-block-height.js\"\nimport {atBlockId} from \"../build/build-at-block-id.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {invariant} from \"@onflow/util-invariant\"\n\nexport function block({sealed = false, id, height} = {}, opts = {}) {\n  invariant(\n    !((sealed && id) || (sealed && height)),\n    `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`\n  )\n\n  invariant(\n    !(id && height),\n    `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get block by ID\n  if (id) return send([getBlock(), atBlockId(id)], opts).then(decode)\n\n  // Get block by height\n  if (height) return send([getBlock(), atBlockHeight(height)], opts).then(decode)\n\n  // Get latest block\n  return send([getBlock(sealed)], opts).then(decode)\n}\n","import {pipe, prepAccount, AUTHORIZER} from \"../interaction/interaction.js\"\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {role: AUTHORIZER})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEvents(eventType, start, end) {\n\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )  \n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockHeightRange(eventType, start, end) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockIds(eventType, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetLatestBlock} from \"../interaction/interaction.js\"\n\nexport function getLatestBlock(isSealed = false) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetLatestBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockById} from \"../interaction/interaction.js\"\n\nexport function getBlockById(id) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockById,\n    ix => {\n      ix.block.ids = [id]\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockByHeight} from \"../interaction/interaction.js\"\n\nexport function getBlockByHeight(height) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockByHeight,\n    ix => {\n      ix.block.height = height\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetCollection} from \"../interaction/interaction.js\"\n\nexport function getCollection(id = null) {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","export function limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit\n    return ix\n  }\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {prepAccount, PROPOSER} from \"../interaction/interaction.js\"\n\nexport async function proposer(authz) {\n  return prepAccount(authz, {role: PROPOSER})\n}\n","import {prepAccount, PAYER} from \"../interaction/interaction.js\"\n\nexport async function payer(authz) {\n  return prepAccount(authz, {role: PAYER})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([\n    makeScript,\n    put(\"ix.cadence\", template(...args))\n  ])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.computeLimit = ix.message.computeLimit || DEFAULT_COMPUTE_LIMIT\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import {put} from \"../interaction/interaction.js\"\n\nexport function voucherIntercept(fn) {\n  return put(\"ix.voucher-intercept\", fn)\n}\n","import {isTransaction, Ok} from \"../interaction/interaction.js\"\nimport * as ixModule from \"../interaction/interaction.js\"\nimport {response as responseModule} from \"../response/response.js\"\nimport {config} from \"../config\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {build} from \"../build/build.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {Buffer} from \"@onflow/rlp\"\n\nexport const resolveProposerSequenceNumber = ({ node }) => async (ix) => {\n  if (!(isTransaction(ix))) return Ok(ix)\n  if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix)\n\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"]\n  )\n\n  invariant(\n    sendFn, \n    `Required value for sdk.transport is not defined in config. See: ${\"https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21\"}`\n  )\n\n  const response = await sendFn(\n    await build([\n      getAccount(ix.accounts[ix.proposer].addr)\n    ]),\n    {config, response: responseModule, Buffer, ix: ixModule},\n    {node}\n  )\n  const decoded = await decodeResponse(response)\n\n  ix.accounts[ix.proposer].sequenceNum = decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber\n\n  return Ok(ix)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","export const idof = acct => `${acct.addr}-${acct.keyId}`\n\nexport function sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\nexport function authzFn(opts = {}) {\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\nexport function authzResolve(opts = {}) {\n  return function (account) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\nexport function authzResolveMany(opts = {}) {\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\n\nexport const run = (fns = []) => build([ref(\"123\"), ...fns]).then(resolve)\n","export const VERSION = process.env.CURRENT_VERSION || \"TESTVERSION\"\n","import {deprecate} from \"./utils\"\n// Base\nexport {build} from \"./build/build.js\"\nexport {resolve} from \"./resolve/resolve.js\"\nexport {send} from \"./send/send.js\"\nexport {decode} from \"./decode/sdk-decode.js\"\n\n// Utils\nexport {\n  interaction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isGetLatestBlock,\n  isGetBlockById,\n  isGetBlockByHeight,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n} from \"./interaction/interaction.js\"\nexport {createSignableVoucher, voucherToTxId} from \"./resolve/voucher.js\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable.js\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// Helpers\nexport {latestBlock} from \"./latest-block/latest-block.js\"\nexport {account} from \"./account/account.js\"\nexport {block} from \"./block/block.js\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations.js\"\nexport {atBlockHeight} from \"./build/build-at-block-height.js\"\nexport {atBlockId} from \"./build/build-at-block-id.js\"\nexport {getAccount} from \"./build/build-get-account.js\"\nexport {getEvents} from \"./build/build-get-events.js\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range.js\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block.js\"\nexport {getBlockHeader} from \"./build/build-get-block-header.js\"\nexport {getLatestBlock} from \"./build/build-get-latest-block.js\"\nexport {getBlockById} from \"./build/build-get-block-by-id.js\"\nexport {getBlockByHeight} from \"./build/build-get-block-by-height\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status.js\"\nexport {getTransaction} from \"./build/build-get-transaction.js\"\nexport {limit} from \"./build/build-limit.js\"\nexport {args, arg} from \"./build/build-arguments.js\"\nexport {proposer} from \"./build/build-proposer.js\"\nexport {payer} from \"./build/build-payer.js\"\nexport {ping} from \"./build/build-ping.js\"\nexport {ref} from \"./build/build-ref.js\"\nexport {script} from \"./build/build-script.js\"\nexport {transaction} from \"./build/build-transaction.js\"\nexport {validator} from \"./build/build-validator.js\"\nexport {invariant} from \"./build/build-invariant.js\"\nexport {voucherIntercept} from \"./build/build-voucher-intercept.js\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence.js\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments.js\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts.js\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures.js\"\nexport {resolveValidators} from \"./resolve/resolve-validators.js\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id.js\"\nexport {resolveVoucherIntercept} from \"./resolve/resolve-voucher-intercept.js\"\n\n// Config\nexport {config} from \"./config\"\n\n// Deprecated\nexport const params = params =>\n  deprecate.error({\n    name: \"params\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\nexport const param = params =>\n  deprecate.warn({\n    name: \"param\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\"\n","const buildWarningMessage = ({name, transitionsPath}) => {\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst buildErrorMessage = ({name, transitionsPath}) => {\n  console.error(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst warn = deprecated => buildWarningMessage(deprecated)\n\nconst error = deprecated => {\n  buildErrorMessage(deprecated)\n}\n\nexport const deprecate = {\n  warn,\n  error,\n}\n"],"names":["IX","KEYS","Set","Object","keys","JSON","parse","interaction","CHARS","split","randChar","Math","random","length","uuid","Array","from","join","isNumber","d","isArray","isObj","isNull","isFn","isInteraction","ix","hasOwnProperty","Ok","status","Bad","reason","makeIx","wat","tag","prepAccount","acct","opts","invariant","role","ACCOUNT","tempId","authorization","resolve","accounts","authorizations","push","makeArgument","arg","message","arguments","value","asArgument","xform","resolveArgument","bind","makeUnknown","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makeGetLatestBlock","makeGetBlockById","makeGetBlockByHeight","makePing","makeGetBlock","makeGetBlockHeader","makeGetCollection","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isGetLatestBlock","isGetBlockById","isGetBlockByHeight","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isOk","isBad","why","recPipe","fns","body","recover","result","key","has","Error","hardMode","hd","rest","cur","e","then","pipe","arg1","arg2","identity","v","get","fallback","assigns","put","update","fn","destroy","account","kind","param","argument","build","first","wants","head","ret","NAME","PUT","GET","UPDATED","HANDLERS","ctx","_letter","broadcast","all","letter","reply","pattern","where","SUBSCRIBE","subscribe","send","UNSUBSCRIBE","unsubscribe","config","expectReply","timeout","_delete","callback","subscriber","spawn","clearConfig","values","map","delete","overload","noop","Promise","reject","oldConfig","_callback","error","response","getBlock","isSealed","block","getAccount","addr","sansPrefix","decodeNumber","num","_","stack","Number","decodeImplicit","i","decodeComposite","composite","decoders","fields","reduce","acc","recurseDecode","name","decoded","decoder","id","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","String","Character","Bool","Address","Void","Optional","optional","Reference","address","type","array","res","Dictionary","dictionary","Event","Resource","Struct","Enum","Type","staticType","Path","path","domain","identifier","Capability","cap","borrowType","lookup","found","find","test","RegExp","substring","decodeInstructions","decode","customDecoders","decodeResponse","encodedData","transactionStatus","events","eventIndex","transactionIndex","transactionId","payload","data","transaction","blockTimestamp","blockHeight","blockId","blockHeader","latestBlock","console","replace","trim","collection","resolveRefBlockId","refBlock","node","sendFn","Buffer","ixModule","getRefId","resolveCadence","isString","cadence","entries","regex","Symbol","iterator","pact","state","s","o","_settle","observer","_Pact","prototype","onFulfilled","onRejected","this","_this","thenable","resolveArguments","target","check","step","_cycle","next","done","_isSettledPact","_fixup","TypeError","handleArgResolution","cast","depth","resolvedArg","encodeTransactionPayload","tx","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","leftPaddedHexBuffer","pad","padStart","TRANSACTION_DOMAIN_TAG","toString","padEnd","addressBuffer","blockBuffer","argumentToString","stringify","scriptBuffer","script","signatureBuffer","signature","encode","validatePayload","computeLimit","proposalKey","keyId","sequenceNum","payer","authorizers","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","sig","signerIndex","sort","a","b","Map","addSigner","set","forEach","payloadFields","field","checkField","proposalKeyFields","payloadSigsFields","index","payloadSigFields","isObject","defaultVal","envelopeSigsFields","envelopeSigFields","obj","base","missingFieldError","invalidFieldError","printFieldName","findInsideSigners","inside","add","proposer","findOutsideSigners","outside","createSignableVoucher","withPrefix","cid","prev","current","item","buildAuthorizers","envelopeSigs","voucherToTxId","voucher","msg","validateVoucher","prepareSigs","sigs","authorizer","prepareVoucher","sha","SHA3","digest","encodeTxIdFromVoucher","resolveAccounts","collectAccounts","last","curr","ax","old","f_type","f_vsn","roles","args","buildPreSignable","resolveSignatures","insideSigners","insidePayload","encodeInsideMessage","prepForEncoding","fetchSignature","outsideSigners","outsidePayload","encodeOutsideMessage","signingFunction","buildSignable","resolveValidators","validators","cb","resolveFinalNormalization","resolveVoucherIntercept","debug","accts","filter","Boolean","log","_sendFn$then","sequenceNumber","predicate","defaultResolve","resolveFn","decodersFromConfig","fromEntries","UnableToDetermineMessageEncodingTypeForSignerAddress","signerAddress","encodeMessageFromSignable","signable","payloadSigners","envelopeSigners","envelope","findEnvelopeSigners","isPayloadSigner","includes","isEnvelopeSigner","ps","warn","validator","atBlockHeight","height","atBlockId","sealed","authz","getEvents","eventType","start","end","getEventsAtBlockHeightRange","getEventsAtBlockIds","blockIds","getBlockHeader","getLatestBlock","getBlockById","ids","getBlockByHeight","getCollection","getTransactionStatus","getTransaction","limit","ping","ref","template","DEFAULT_SCRIPT_ACCOUNTS","voucherIntercept","resolveProposerSequenceNumber","responseModule","authzFn","ROLE","numberOfKeys","mockAccountResponse","VERSION","params","transitionsPath"],"mappings":"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"}