!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@onflow/util-invariant"),require("@onflow/protobuf"),require("@improbable-eng/grpc-web"),require("@improbable-eng/grpc-web-node-http-transport"),require("@onflow/util-address")):"function"==typeof define&&define.amd?define(["exports","@onflow/util-invariant","@onflow/protobuf","@improbable-eng/grpc-web","@improbable-eng/grpc-web-node-http-transport","@onflow/util-address"],t):t((e||self).transportGrpc={},e.utilInvariant,e.protobuf,e.grpcWeb,e.grpcWebNodeHttpTransport,e.utilAddress)}(this,function(e,t,n,r,o,s){var i=function(e,n,o,s){try{return t.invariant(s.config,"SDK GRPC Unary Error: context.config must be defined."),Promise.resolve(s.config().get("grpc.metadata",{})).then(function(t){return new Promise(function(s,i){r.grpc.unary(n,{request:o,host:e,metadata:new r.grpc.Metadata(t),onEnd:function(e){var t=e.statusMessage;e.status===r.grpc.Code.OK?s(e.message):i(new Error(t))}})})})}catch(e){return Promise.reject(e)}};r.grpc.setDefaultTransport(o.NodeHttpTransport());var a=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r={});try{return t.invariant(r.node,"SDK Send Execute Script Error: opts.node must be defined."),t.invariant(n.response,"SDK Send Execute Script Error: context.response must be defined."),t.invariant(n.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){return e=t,Promise.resolve(e.block.id?d(e,n,r):e.block.height?u(e,n,r):c(e,n,r))})}catch(e){return Promise.reject(e)}},c=function(e,t,r){try{var o=r.unary||i,s=new n.ExecuteScriptAtLatestBlockRequest,a=t.Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return s.addArguments(f(e.arguments[n].asArgument,t))}),s.setScript(a),Promise.resolve(o(r.node,n.AccessAPI.ExecuteScriptAtLatestBlock,s,t)).then(function(n){return g(e,t,n)})}catch(e){return Promise.reject(e)}},u=function(e,t,r){try{var o=r.unary||i,s=new n.ExecuteScriptAtBlockHeightRequest;s.setBlockHeight(Number(e.block.height));var a=t.Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return s.addArguments(f(e.arguments[n].asArgument,t))}),s.setScript(a),Promise.resolve(o(r.node,n.AccessAPI.ExecuteScriptAtBlockHeight,s,t)).then(function(n){return g(e,t,n)})}catch(e){return Promise.reject(e)}},d=function(e,t,r){try{var o=r.unary||i,s=new n.ExecuteScriptAtBlockIDRequest;s.setBlockId(l(e.block.id,t));var a=t.Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return s.addArguments(f(e.arguments[n].asArgument,t))}),s.setScript(a),Promise.resolve(o(r.node,n.AccessAPI.ExecuteScriptAtBlockID,s,t)).then(function(n){return g(e,t,n)})}catch(e){return Promise.reject(e)}},f=function(e,t){return t.Buffer.from(JSON.stringify(e),"utf8")},l=function(e,t){return t.Buffer.from(e,"hex")};function g(e,t,n){var r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n.getValue_asU8()).toString("utf8")),r}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var p=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r={});try{return t.invariant(r.node,"SDK Send Get Account Error: opts.node must be defined."),t.invariant(n.response,"SDK Get Account Error: context.response must be defined."),t.invariant(n.Buffer,"SDK Get Account Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){return e=t,Promise.resolve(null!==e.block.height?S(e,n,r):v(e,n,r))})}catch(e){return Promise.reject(e)}},v=function(e,t,r){try{var o=r.unary||i,a=new n.GetAccountAtLatestBlockRequest;return a.setAddress(B(s.sansPrefix(e.account.addr),t)),Promise.resolve(o(r.node,n.AccessAPI.GetAccountAtLatestBlock,a,t)).then(function(n){return b(e,t,n)})}catch(e){return Promise.reject(e)}},S=function(e,t,r){try{var o=r.unary||i,a=new n.GetAccountAtBlockHeightRequest;return a.setBlockHeight(Number(e.block.height)),a.setAddress(B(s.sansPrefix(e.account.addr),t)),Promise.resolve(o(r.node,n.AccessAPI.GetAccountAtBlockHeight,a,t)).then(function(n){return b(e,t,n)})}catch(e){return Promise.reject(e)}},h=function(e,t){return t.Buffer.from(e).toString("hex")},B=function(e,t){return function(e,t,n){return n.Buffer.from(e.padStart(16,0),"hex")}(e,0,t)},k={1:"SHA2_256",2:"SHA2_384",3:"SHA3_256",4:"SHA3_384",5:"KMAC128_BLS_BLS12_381"},I={1:"ECDSA_P256",2:"ECDSA_secp256k1",3:"BLS_BLS12_381"};function b(e,t,n){var r=t.response();r.tag=e.tag;var o,i=n.getAccount(),a=(o=i.getContractsMap())?o.getEntryList().reduce(function(e,n){var r;return m({},e,((r={})[n[0]]=t.Buffer.from(n[1]||new UInt8Array).toString("utf8"),r))},{}):{};return r.account={address:s.withPrefix(h(i.getAddress_asU8(),t)),balance:i.getBalance(),code:t.Buffer.from(i.getCode_asU8()||new UInt8Array).toString("utf8"),contracts:a,keys:i.getKeysList().map(function(e){return{index:e.getIndex(),publicKey:h(e.getPublicKey_asU8(),t),signAlgo:e.getSignAlgo(),signAlgoString:I[e.getSignAlgo()],hashAlgo:e.getHashAlgo(),hashAlgoString:k[e.getHashAlgo()],weight:e.getWeight(),sequenceNumber:e.getSequenceNumber(),revoked:e.getRevoked()}})},r}var y=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r={});try{return t.invariant(r.node,"SDK Send Get Block Header Error: opts.node must be defined."),t.invariant(n.response,"SDK Send Get Block Header Error: context.response must be defined."),t.invariant(n.Buffer,"SDK Send Get Block Header Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){var o=null!==(e=t).block.height;return Promise.resolve(null!==e.block.id?G(e,n,r):o?x(e,n,r):P(e,n,r))})}catch(e){return Promise.reject(e)}},P=function(e,t,r){try{var o,s=r.unary||i,a=new n.GetLatestBlockHeaderRequest;return null!=(o=e.block)&&o.isSealed&&a.setIsSealed(e.block.isSealed),Promise.resolve(s(r.node,n.AccessAPI.GetLatestBlockHeader,a,t)).then(function(n){return D(e,t,n)})}catch(e){return Promise.reject(e)}},x=function(e,t,r){try{var o=r.unary||i,s=new n.GetBlockHeaderByHeightRequest;return s.setHeight(Number(e.block.height)),Promise.resolve(o(r.node,n.AccessAPI.GetBlockHeaderByHeight,s,t)).then(function(n){return D(e,t,n)})}catch(e){return Promise.reject(e)}},G=function(e,t,r){try{var o=r.unary||i,s=new n.GetBlockHeaderByIDRequest;return s.setId(E(e.block.id,t)),Promise.resolve(o(r.node,n.AccessAPI.GetBlockHeaderByID,s,t)).then(function(n){return D(e,t,n)})}catch(e){return Promise.reject(e)}},A=function(e,t){return t.Buffer.from(e).toString("hex")},E=function(e,t){return t.Buffer.from(e,"hex")};function D(e,t,n){var r=n.getBlock(),o=t.response();return o.tag=e.tag,o.blockHeader={id:A(r.getId_asU8(),t),parentId:A(r.getParentId_asU8(),t),height:r.getHeight(),timestamp:r.getTimestamp().toDate().toISOString()},o}var L=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r={});try{return t.invariant(r.node,"SDK Send Get Block Error: opts.node must be defined."),t.invariant(n.response,"SDK Send Get Block Error: context.response must be defined."),t.invariant(n.Buffer,"SDK Send Get Block Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){var o=null!==(e=t).block.height;return Promise.resolve(null!==e.block.id?K(e,n,r):o?T(e,n,r):w(e,n,r))})}catch(e){return Promise.reject(e)}},w=function(e,t,r){try{var o,s=r.unary||i,a=new n.GetLatestBlockRequest;return null!=(o=e.block)&&o.isSealed&&a.setIsSealed(e.block.isSealed),Promise.resolve(s(r.node,n.AccessAPI.GetLatestBlock,a,t)).then(function(n){return _(e,t,n)})}catch(e){return Promise.reject(e)}},T=function(e,t,r){try{var o=r.unary||i,s=new n.GetBlockByHeightRequest;return s.setHeight(Number(e.block.height)),Promise.resolve(o(r.node,n.AccessAPI.GetBlockByHeight,s,t)).then(function(n){return _(e,t,n)})}catch(e){return Promise.reject(e)}},K=function(e,t,r){try{var o=r.unary||i,s=new n.GetBlockByIDRequest;return s.setId(R(e.block.id,t)),Promise.resolve(o(r.node,n.AccessAPI.GetBlockByID,s,t)).then(function(n){return _(e,t,n)})}catch(e){return Promise.reject(e)}},H=function(e,t){return t.Buffer.from(e).toString("hex")},R=function(e,t){return t.Buffer.from(e,"hex")};function _(e,t,n){var r=n.getBlock(),o=r.getCollectionGuaranteesList(),s=r.getBlockSealsList(),i=r.getSignaturesList().map(function(e){return H(e,t)}),a=t.response();return a.tag=e.tag,a.block={id:H(r.getId_asU8(),t),parentId:H(r.getParentId_asU8(),t),height:r.getHeight(),timestamp:r.getTimestamp().toDate().toISOString(),collectionGuarantees:o.map(function(e){return{collectionId:H(e.getCollectionId_asU8(),t),signatures:e.getSignaturesList().map(function(e){return H(e,t)})}}),blockSeals:s.map(function(e){return{blockId:H(e.getBlockId_asU8(),t),executionReceiptId:H(e.getExecutionReceiptId_asU8(),t),executionReceiptSignatures:e.getExecutionReceiptSignaturesList().map(function(e){return H(e,t)}),resultApprovalSignatures:e.getResultApprovalSignaturesList().map(function(e){return H(e,t)})}}),signatures:i},a}var U=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{t.invariant(o.node,"SDK Send Get Collection Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Collection Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Collection Error: context.Buffer must be defined.");var s=o.unary||i;return Promise.resolve(e).then(function(t){e=t;var i=new n.GetCollectionByIDRequest;return i.setId(q(e.collection.id,r)),Promise.resolve(s(o.node,n.AccessAPI.GetCollectionByID,i,r)).then(function(t){var n=t.getCollection(),o=r.response();return o.tag=e.tag,o.collection={id:j(n.getId_asU8(),r),transactionIds:n.getTransactionIdsList().map(function(e){return j(e,r)})},o})})}catch(e){return Promise.reject(e)}},j=function(e,t){return t.Buffer.from(e).toString("hex")},q=function(e,t){return t.Buffer.from(e,"hex")},N=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r={});try{return t.invariant(r.node,"SDK Send Get Events Error: opts.node must be defined."),t.invariant(n.response,"SDK Send Get Events Error: context.response must be defined."),t.invariant(n.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),Promise.resolve(e).then(function(o){var s=null!==(e=o).events.start,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return t.invariant(s||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),Promise.resolve(s?O(e,n,r):C(e,n,r))})}catch(e){return Promise.reject(e)}},C=function(e,t,r){try{var o=r.unary||i,s=new n.GetEventsForBlockIDsRequest;return s.setType(e.events.eventType),e.events.blockIds.forEach(function(e){return s.addBlockIds(J(e,t))}),Promise.resolve(o(r.node,n.AccessAPI.GetEventsForBlockIDs,s,t)).then(function(n){return M(e,t,n)})}catch(e){return Promise.reject(e)}},O=function(e,t,r){try{var o=r.unary||i,s=new n.GetEventsForHeightRangeRequest;return s.setType(e.events.eventType),s.setStartHeight(Number(e.events.start)),s.setEndHeight(Number(e.events.end)),Promise.resolve(o(r.node,n.AccessAPI.GetEventsForHeightRange,s,t)).then(function(n){return M(e,t,n)})}catch(e){return Promise.reject(e)}},F=function(e,t){return t.Buffer.from(e).toString("hex")},J=function(e,t){return t.Buffer.from(e,"hex")};function M(e,t,n){var r=t.response();r.tag=e.tag;var o=n.getResultsList();return r.events=o.reduce(function(e,n){var r=F(n.getBlockId_asU8(),t),o=n.getBlockHeight(),s=n.getBlockTimestamp().toDate().toISOString();return n.getEventsList().forEach(function(n){e.push({blockId:r,blockHeight:o,blockTimestamp:s,type:n.getType(),transactionId:F(n.getTransactionId_asU8(),t),transactionIndex:n.getTransactionIndex(),eventIndex:n.getEventIndex(),payload:JSON.parse(t.Buffer.from(n.getPayload_asU8()).toString("utf8"))})}),e},[]),r}var W=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{return t.invariant(o.node,"SDK Send Get Latest Block Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Latest Block Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Latest Block Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){e=t;var s=new n.GetLatestBlockRequest;return e.latestBlock&&e.latestBlock.isSealed&&(s.setIsSealed(e.latestBlock.isSealed),X()),e.block&&e.block.isSealed&&s.setIsSealed(e.block.isSealed),Promise.resolve(i(o.node,n.AccessAPI.GetLatestBlock,s,r)).then(function(t){var n=t.getBlock(),o=n.getCollectionGuaranteesList(),s=n.getBlockSealsList(),i=n.getSignaturesList(),a=r.response();return a.tag=e.tag,a.block={id:z(n.getId_asU8(),r),parentId:z(n.getParentId_asU8(),r),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:o.map(function(e){return{collectionId:z(e.getCollectionId_asU8(),r),signatures:e.getSignaturesList()}}),blockSeals:s.map(function(e){return{blockId:z(e.getBlockId_asU8(),r),executionReceiptId:z(e.getExecutionReceiptId_asU8(),r),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},a})})}catch(e){return Promise.reject(e)}},z=function(e,t){return t.Buffer.from(e).toString("hex")},X=function(){console.error("\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;")},V=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{t.invariant(o.node,"SDK Send Get Transaction Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Transaction Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");var s=o.unary||i;return Promise.resolve(e).then(function(t){e=t;var i=new n.GetTransactionRequest;return i.setId(Q(e.transaction.id,r)),Promise.resolve(s(o.node,n.AccessAPI.GetTransaction,i,r)).then(function(t){var n=r.response();n.tag=e.tag;var o,s=function(e){return{address:Z(e.getAddress_asU8(),r),keyId:e.getKeyId(),signature:Z(e.getSignature_asU8(),r)}},i=t.getTransaction();return n.transaction={script:r.Buffer.from(i.getScript_asU8()).toString("utf8"),args:i.getArgumentsList().map(function(e){return JSON.parse(r.Buffer.from(e).toString("utf8"))}),referenceBlockId:Z(i.getReferenceBlockId_asU8(),r),gasLimit:i.getGasLimit(),proposalKey:(o=i.getProposalKey(),{address:Z(o.getAddress_asU8(),r),keyId:o.getKeyId(),sequenceNumber:o.getSequenceNumber()}),payer:Z(i.getPayer_asU8(),r),authorizers:i.getAuthorizersList().map(function(e){return Z(e,r)}),payloadSignatures:i.getPayloadSignaturesList().map(s),envelopeSignatures:i.getEnvelopeSignaturesList().map(s)},n})})}catch(e){return Promise.reject(e)}},Z=function(e,t){return t.Buffer.from(e).toString("hex")},Q=function(e,t){return t.Buffer.from(e,"hex")},Y=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{t.invariant(o.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Transaction Status Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");var s=o.unary||i;return Promise.resolve(e).then(function(t){e=t;var i=new n.GetTransactionRequest;return i.setId(te(e.transaction.id,r)),Promise.resolve(s(o.node,n.AccessAPI.GetTransactionResult,i,r)).then(function(t){var n=t.getEventsList(),o=r.response();return o.tag=e.tag,o.transactionStatus={status:t.getStatus(),statusString:$[t.getStatus()],statusCode:t.getStatusCode(),errorMessage:t.getErrorMessage(),events:n.map(function(e){return{type:e.getType(),transactionId:ee(e.getTransactionId_asU8(),r),transactionIndex:e.getTransactionIndex(),eventIndex:e.getEventIndex(),payload:JSON.parse(r.Buffer.from(e.getPayload_asU8()).toString("utf8"))}})},o})})}catch(e){return Promise.reject(e)}},$={0:"UNKNOWN",1:"PENDING",2:"FINALIZED",3:"EXECUTED",4:"SEALED",5:"EXPIRED"},ee=function(e,t){return t.Buffer.from(e).toString("hex")},te=function(e,t){return t.Buffer.from(e,"hex")},ne=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{t.invariant(o.node,"SDK Send Ping Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Ping Error: context.response must be defined.");var s=o.unary||i;return Promise.resolve(e).then(function(t){e=t;var i=new n.PingRequest;return Promise.resolve(s(o.node,n.AccessAPI.Ping,i,r)).then(function(t){var n=r.response();return n.tag=e.tag,n})})}catch(e){return Promise.reject(e)}},re=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{t.invariant(o.node,"SDK Send Transaction Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Transaction Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");var a=o.unary||i;return Promise.resolve(e).then(function(t){e=t;var i=new n.Transaction;i.setScript(se(e.message.cadence,r)),i.setGasLimit(e.message.computeLimit),i.setReferenceBlockId(e.message.refBlock?ie(e.message.refBlock,r):null),i.setPayer(ae(s.sansPrefix(e.accounts[e.payer].addr),r)),e.message.arguments.forEach(function(t){return i.addArguments(ce(e.arguments[t].asArgument,r))}),e.authorizations.map(function(t){return e.accounts[t].addr}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[]).forEach(function(e){return i.addAuthorizers(ae(s.sansPrefix(e),r))});var c=new n.Transaction.ProposalKey;c.setAddress(ae(s.sansPrefix(e.accounts[e.proposer].addr),r)),c.setKeyId(e.accounts[e.proposer].keyId),c.setSequenceNumber(e.accounts[e.proposer].sequenceNum),i.setProposalKey(c);for(var u=0,d=Object.values(e.accounts);u<d.length;u++){var f=d[u];try{if(!f.role.payer&&null!=f.signature){var l=new n.Transaction.Signature;l.setAddress(ae(s.sansPrefix(f.addr),r)),l.setKeyId(f.keyId),l.setSignature(ie(f.signature,r)),i.addPayloadSignatures(l)}}catch(t){throw console.error("Trouble applying payload signature",{acct:f,ix:e}),t}}for(var g=0,m=Object.values(e.accounts);g<m.length;g++){var p=m[g];try{if(p.role.payer&&null!=p.signature){var v=new n.Transaction.Signature;v.setAddress(ae(s.sansPrefix(p.addr),r)),v.setKeyId(p.keyId),v.setSignature(ie(p.signature,r)),i.addEnvelopeSignatures(v)}}catch(t){throw console.error("Trouble applying envelope signature",{acct:p,ix:e}),t}}var S=new n.SendTransactionRequest;S.setTransaction(i);var h=Date.now();return Promise.resolve(a(o.node,n.AccessAPI.SendTransaction,S,r)).then(function(t){var n=Date.now(),o=r.response();return o.tag=e.tag,o.transactionId=oe(t.getId_asU8(),r),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:o.transactionId,delta:n-h}})),o})})}catch(e){return Promise.reject(e)}},oe=function(e,t){return t.Buffer.from(e).toString("hex")},se=function(e,t){return t.Buffer.from(e,"utf8")},ie=function(e,t){return t.Buffer.from(e,"hex")},ae=function(e,t){return function(e,t,n){return n.Buffer.from(e.padStart(16,0),"hex")}(e,0,t)},ce=function(e,t){return t.Buffer.from(JSON.stringify(e),"utf8")},ue=function(e,t){return t.Buffer.from(e).toString("hex")},de=function(e,t){return t.Buffer.from(e).toString("hex")};e.send=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{return t.invariant(o.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),t.invariant(r.ix,"SDK Send Error: context.ix must be defined."),Promise.resolve(e).then(function(s){switch(e=s,!0){case r.ix.isTransaction(e):return o.sendTransaction?o.sendTransaction(e,r,o):re(e,r,o);case r.ix.isGetTransactionStatus(e):return o.sendGetTransactionStatus?o.sendGetTransactionStatus(e,r,o):Y(e,r,o);case r.ix.isGetTransaction(e):return o.sendGetTransaction?o.sendGetTransaction(e,r,o):V(e,r,o);case r.ix.isScript(e):return o.sendExecuteScript?o.sendExecuteScript(e,r,o):a(e,r,o);case r.ix.isGetAccount(e):return o.sendGetAccount?o.sendGetAccount(e,r,o):p(e,r,o);case r.ix.isGetEvents(e):return o.sendGetEvents?o.sendGetEvents(e,r,o):N(e,r,o);case r.ix.isGetLatestBlock(e):return o.sendGetLatestBlock?o.sendGetLatestBlock(e,r,o):W(e,r,o);case r.ix.isGetBlock(e):return o.sendGetBlock?o.sendGetBlock(e,r,o):L(e,r,o);case r.ix.isGetBlockHeader(e):return o.sendGetBlockHeader?o.sendGetBlockHeader(e,r,o):y(e,r,o);case r.ix.isGetBlockById(e):return o.sendGetBlockById?o.sendGetBlockById(e,r,o):function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{return t.invariant(o.node,"SDK Send Get Block By ID Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Block By ID Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Block By ID Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){e=t;var s=new n.GetBlockByIDRequest;return s.setId(function(e,t){return t.Buffer.from(e,"hex")}(e.block.id,r)),Promise.resolve(i(o.node,n.AccessAPI.GetBlockByID,s,r)).then(function(t){var n=t.getBlock(),o=n.getCollectionGuaranteesList(),s=n.getBlockSealsList(),i=n.getSignaturesList(),a=r.response();return a.tag=e.tag,a.block={id:ue(n.getId_asU8(),r),parentId:ue(n.getParentId_asU8(),r),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:o.map(function(e){return{collectionId:ue(e.getCollectionId_asU8(),r),signatures:e.getSignaturesList()}}),blockSeals:s.map(function(e){return{blockId:ue(e.getBlockId_asU8(),r),executionReceiptId:ue(e.getExecutionReceiptId_asU8(),r),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},a})})}catch(e){return Promise.reject(e)}}(e,r,o);case r.ix.isGetBlockByHeight(e):return o.sendGetBlockByHeight?o.sendGetBlockByHeight(e,r,o):function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});try{return t.invariant(o.node,"SDK Send Get Block By Height Error: opts.node must be defined."),t.invariant(r.response,"SDK Send Get Block By Height Error: context.response must be defined."),t.invariant(r.Buffer,"SDK Send Get Block By Height Error: context.Buffer must be defined."),Promise.resolve(e).then(function(t){e=t;var s=new n.GetBlockByHeightRequest;return s.setHeight(Number(e.block.height)),Promise.resolve(i(o.node,n.AccessAPI.GetBlockByHeight,s,r)).then(function(t){var n=t.getBlock(),o=n.getCollectionGuaranteesList(),s=n.getBlockSealsList(),i=n.getSignaturesList(),a=r.response();return a.tag=e.tag,a.block={id:de(n.getId_asU8(),r),parentId:de(n.getParentId_asU8(),r),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:o.map(function(e){return{collectionId:de(e.getCollectionId_asU8(),r),signatures:e.getSignaturesList()}}),blockSeals:s.map(function(e){return{blockId:de(e.getBlockId_asU8(),r),executionReceiptId:de(e.getExecutionReceiptId_asU8(),r),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},a})})}catch(e){return Promise.reject(e)}}(e,r,o);case r.ix.isGetCollection(e):return o.sendGetCollection?o.sendGetCollection(e,r,o):U(e,r,o);case r.ix.isPing(e):return o.sendPing?o.sendPing(e,r,o):ne(e,r,o);default:return e}})}catch(e){return Promise.reject(e)}},e.sendExecuteScript=a,e.sendGetAccount=p,e.sendGetBlock=L,e.sendGetBlockHeader=y,e.sendGetCollection=U,e.sendGetEvents=N,e.sendGetLatestBlock=W,e.sendGetTransaction=V,e.sendGetTransactionStatus=Y,e.sendPing=ne,e.sendTransaction=re});
//# sourceMappingURL=sdk-send-grpc.umd.js.map
